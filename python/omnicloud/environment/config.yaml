# OmniCloud RL Environment Configuration
# Terminal Bench v2 - Multi-Cloud Infrastructure Orchestration Platform

environment:
  name: "OmniCloud"
  version: "2.0.0"
  difficulty: "Distinguished Engineer"
  estimated_time: "24-48 hours"
  max_steps: 300

# Bug configuration
bugs:
  total: 120
  categories:
    setup_hell:
      prefix: "L"
      count: 15
      ids: ["L1", "L2", "L3", "L4", "L5", "L6", "L7", "L8", "L9", "L10", "L11", "L12", "L13", "L14", "L15"]
    infrastructure_state:
      prefix: "A"
      count: 12
      ids: ["A1", "A2", "A3", "A4", "A5", "A6", "A7", "A8", "A9", "A10", "A11", "A12"]
    distributed_consensus:
      prefix: "B"
      count: 10
      ids: ["B1", "B2", "B3", "B4", "B5", "B6", "B7", "B8", "B9", "B10"]
    multi_tenancy:
      prefix: "C"
      count: 8
      ids: ["C1", "C2", "C3", "C4", "C5", "C6", "C7", "C8"]
    network_management:
      prefix: "D"
      count: 10
      ids: ["D1", "D2", "D3", "D4", "D5", "D6", "D7", "D8", "D9", "D10"]
    resource_scheduling:
      prefix: "E"
      count: 8
      ids: ["E1", "E2", "E3", "E4", "E5", "E6", "E7", "E8"]
    deployment_pipeline:
      prefix: "F"
      count: 10
      ids: ["F1", "F2", "F3", "F4", "F5", "F6", "F7", "F8", "F9", "F10"]
    database_transactions:
      prefix: "G"
      count: 10
      ids: ["G1", "G2", "G3", "G4", "G5", "G6", "G7", "G8", "G9", "G10"]
    billing_metering:
      prefix: "H"
      count: 8
      ids: ["H1", "H2", "H3", "H4", "H5", "H6", "H7", "H8"]
    security_compliance:
      prefix: "I"
      count: 10
      ids: ["I1", "I2", "I3", "I4", "I5", "I6", "I7", "I8", "I9", "I10"]
    observability:
      prefix: "J"
      count: 7
      ids: ["J1", "J2", "J3", "J4", "J5", "J6", "J7"]
    configuration:
      prefix: "K"
      count: 12
      ids: ["K1", "K2", "K3", "K4", "K5", "K6", "K7", "K8", "K9", "K10", "K11", "K12"]

# Tests configuration
tests:
  total: 750
  categories:
    unit:
      weight: 1.0
      files:
        - "tests/unit/test_infrastructure_state.py"
        - "tests/unit/test_resource_scheduling.py"
        - "tests/unit/test_network_management.py"
        - "tests/unit/test_billing_metering.py"
    integration:
      weight: 1.5
      files:
        - "tests/integration/test_service_communication.py"
        - "tests/integration/test_deployment_pipeline.py"
    contract:
      weight: 2.0
      files:
        - "tests/contract/test_api_contracts.py"
    chaos:
      weight: 3.0
      files:
        - "tests/chaos/test_distributed_consensus.py"
        - "tests/chaos/test_multi_tenancy.py"
    security:
      weight: 2.5
      files:
        - "tests/security/test_vulnerabilities.py"
    performance:
      weight: 2.0
      files:
        - "tests/performance/test_provisioning.py"
    system:
      weight: 3.0
      files:
        - "tests/system/test_end_to_end.py"

# Reward function configuration
reward:
  type: "ultra_sparse"
  thresholds: [0.10, 0.25, 0.40, 0.55, 0.70, 0.85, 0.95, 1.0]
  rewards: [0.0, 0.05, 0.12, 0.22, 0.38, 0.55, 0.78, 1.0]
  components:
    base_reward_weight: 0.60
    service_isolation_weight: 0.15
    chaos_test_weight: 0.10
    infra_state_weight: 0.10
    efficiency_weight: 0.05
  regression_penalty: -0.20
  service_isolation_bonus: 0.015
  chaos_test_bonus: 0.10
  infra_state_bonus: 0.05

# Services
services:
  - name: "gateway"
    path: "services/gateway"
    framework: "FastAPI"
    port: 8000
  - name: "auth"
    path: "services/auth"
    framework: "Django"
    port: 8001
  - name: "tenants"
    path: "services/tenants"
    framework: "Django"
    port: 8002
  - name: "compute"
    path: "services/compute"
    framework: "FastAPI"
    port: 8003
  - name: "network"
    path: "services/network"
    framework: "Django"
    port: 8004
  - name: "storage"
    path: "services/storage"
    framework: "FastAPI"
    port: 8005
  - name: "dns"
    path: "services/dns"
    framework: "Django"
    port: 8006
  - name: "loadbalancer"
    path: "services/loadbalancer"
    framework: "FastAPI"
    port: 8007
  - name: "secrets"
    path: "services/secrets"
    framework: "Django"
    port: 8008
  - name: "config"
    path: "services/config"
    framework: "Django"
    port: 8009
  - name: "deploy"
    path: "services/deploy"
    framework: "Celery/FastAPI"
    port: 8010
  - name: "monitor"
    path: "services/monitor"
    framework: "FastAPI"
    port: 8011
  - name: "billing"
    path: "services/billing"
    framework: "Django"
    port: 8012
  - name: "audit"
    path: "services/audit"
    framework: "Django"
    port: 8013
  - name: "compliance"
    path: "services/compliance"
    framework: "Django"
    port: 8014

# Infrastructure
infrastructure:
  kafka:
    version: "3.6"
    topics: ["infra-events", "deploy-events", "billing-events", "audit-events", "compliance-events", "state-changes", "notifications", "metrics"]
  postgresql:
    version: "16"
    databases: ["infra_db", "tenants_db", "billing_db", "audit_db"]
  redis:
    version: "7"
    usage: ["caching", "pub-sub", "distributed-locks", "celery-broker"]
  consul:
    version: "1.16"
    usage: ["service-discovery", "kv-store", "health-checking"]
  etcd:
    version: "3.5"
    usage: ["distributed-consensus", "leader-election", "config-store"]
  vault:
    version: "1.15"
    usage: ["secret-management", "encryption-as-service", "pki"]
  minio:
    version: "latest"
    usage: ["terraform-state", "artifact-storage", "backups"]
